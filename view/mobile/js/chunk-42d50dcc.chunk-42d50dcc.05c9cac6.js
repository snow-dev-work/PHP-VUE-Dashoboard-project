(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42d50dcc"],{"043c":function(e,t,n){"use strict";n("f1ad")},"0cb2":function(e,t,n){var r=n("e330"),o=n("7b0b"),i=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,f){var h=n+e.length,p=r.length,v=l;return void 0!==d&&(d=o(d),v=u),s(f,v,(function(o,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,h);case"<":u=d[c(s,1,-1)];break;default:var l=+s;if(0===l)return o;if(l>p){var f=i(l/10);return 0===f?o:f<=p?void 0===r[f-1]?a(s,1):r[f-1]+a(s,1):o}u=r[l-1]}return void 0===u?"":u}))}},1276:function(e,t,n){"use strict";var r=n("2ba4"),o=n("c65b"),i=n("e330"),a=n("d784"),s=n("44e7"),c=n("825a"),u=n("1d80"),l=n("4840"),d=n("8aa5"),f=n("50c4"),h=n("577e"),p=n("dc4a"),v=n("4dae"),b=n("14c3"),m=n("9263"),_=n("9f7f"),g=n("d039"),w=_.UNSUPPORTED_Y,O=4294967295,S=Math.min,j=[].push,E=i(/./.exec),I=i(j),x=i("".slice),T=!g((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=h(u(this)),a=void 0===n?O:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!s(e))return o(t,i,e,a);var c,l,d,f=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,_=new RegExp(e.source,p+"g");while(c=o(m,_,i)){if(l=_.lastIndex,l>b&&(I(f,x(i,b,c.index)),c.length>1&&c.index<i.length&&r(j,f,v(c,1)),d=c[0].length,b=l,f.length>=a))break;_.lastIndex===c.index&&_.lastIndex++}return b===i.length?!d&&E(_,"")||I(f,""):I(f,x(i,b)),f.length>a?v(f,0,a):f}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:o(t,this,e,n)}:t,[function(t,n){var r=u(this),a=void 0==t?void 0:p(t,e);return a?o(a,t,r,n):o(i,h(r),t,n)},function(e,r){var o=c(this),a=h(e),s=n(i,o,a,r,i!==t);if(s.done)return s.value;var u=l(o,RegExp),p=o.unicode,v=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(w?"g":"y"),m=new u(w?"^(?:"+o.source+")":o,v),_=void 0===r?O:r>>>0;if(0===_)return[];if(0===a.length)return null===b(m,a)?[a]:[];var g=0,j=0,E=[];while(j<a.length){m.lastIndex=w?0:j;var T,M=b(m,w?x(a,j):a);if(null===M||(T=S(f(m.lastIndex+(w?j:0)),a.length))===g)j=d(a,j,p);else{if(I(E,x(a,g,j)),E.length===_)return E;for(var C=1;C<=M.length-1;C++)if(I(E,M[C]),E.length===_)return E;j=g=T}}return I(E,x(a,g)),E}]}),!T,w)},"245d":function(e,t,n){"use strict";n("4ed9")},2877:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},"3dfd":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"dashboard"}},[n("Popups"),n("ButtonToTop",{attrs:{scroll:e.isScroll}}),n("transition",{attrs:{name:"overlay",mode:"out-in",appear:""}},[e.overlayIsVisible?n("Overlay"):e._e()],1),e.isMobile?e._e():n("Header"),n("transition",{attrs:{name:"header"}},[e.scroll?n("Header",{class:{scroll:e.scroll},attrs:{scroll:e.scroll}}):e._e()],1),e.projects.length>0?n("Projects"):e._e()],1)},o=[],i=n("1da1"),a=n("5530"),s=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"header",class:[{scroll:e.scroll||e.isMobile}],style:[e.styleSideView]},[r("img",{staticClass:"header__logo",attrs:{src:n("4158")}}),r("div",{staticClass:"header__title__container"},[r("h1",{staticClass:"header__title"},[e._v("Suivi de projets")]),null!==e.date&&e.projects.length>0?r("p",{staticClass:"header__subtitle"},[e._v(" Etat d'avancement au "+e._s(e.date.format("DD/MM/YYYY"))+" ")]):e._e()]),e.isMobile||e.scroll?[r("input",{directives:[{name:"model",rawName:"v-model",value:e.showMenu,expression:"showMenu"}],attrs:{hidden:"",type:"checkbox",id:"header__menu__toggle"},domProps:{checked:Array.isArray(e.showMenu)?e._i(e.showMenu,null)>-1:e.showMenu},on:{change:function(t){var n=e.showMenu,r=t.target,o=!!r.checked;if(Array.isArray(n)){var i=null,a=e._i(n,i);r.checked?a<0&&(e.showMenu=n.concat([i])):a>-1&&(e.showMenu=n.slice(0,a).concat(n.slice(a+1)))}else e.showMenu=o}}}),r("label",{staticClass:"header__menu__toggle__btn",class:[{open:e.showMenu}],attrs:{for:"header__menu__toggle"}},[r("Icon",{attrs:{icon:"arrow-up"}})],1)]:r("nav",{staticClass:"header__nav buttons"},[r("a",{staticClass:"btn",class:{active:"MOBILE"===e.view},attrs:{href:"/?token="+e.token,title:"Vue Mobile"}},[r("Icon",{attrs:{icon:"smartphone"}})],1),r("a",{staticClass:"btn",class:{active:"TABLE"===e.view},attrs:{href:"/table?token="+e.token,title:"Vue Tableau"}},[r("Icon",{attrs:{icon:"table"}})],1),r("a",{staticClass:"btn",class:{active:"TIMELINE"===e.view},attrs:{href:"/timeline?token="+e.token,title:"Vue Timeline"}},[r("Icon",{attrs:{icon:"timeline"}})],1),[e.USERS.DIRECTION,e.USERS.SUPERADMIN].includes(e.user)?r("a",{staticClass:"btn",attrs:{href:"/availability?token="+e.token,title:"Disponibilité Informatique"}},[r("Icon",{attrs:{icon:"charts"}})],1):e._e()]),e.show_all_btns?r("div",{staticClass:"header__menu",class:[{open:e.showMenu&&(e.scroll||e.isMobile)}]},[e.show_search_bar?r("SearchBar"):e._e(),r("div",{staticClass:"buttons"},[r("button",{on:{click:function(){return e.filterProjects()}}},[r("Icon",{attrs:{icon:"filters"}}),e._v("Filtrer ")],1),e.show_btns?r("button",{on:{click:function(){return e.sortProjects()}}},[r("Icon",{attrs:{icon:"sorting"}}),e._v("Trier ")],1):e._e(),e.admin?r("button",{on:{click:function(){return e.newProject()}}},[r("Icon",{attrs:{icon:"more"}}),e._v("Nouveau projet ")],1):e._e(),r("button",{on:{click:function(){return e.excel()}}},[e._v("Exporter")])])],1):e._e()],2)}),c=[],u=n("2909"),l=(n("e9c4"),n("c1f9"),n("ac1f"),n("1276"),n("498a"),n("5319"),n("2b3d"),n("9861"),n("94ea")),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"search-bar btn",class:[{focus:e.focus},{searched:0!==e.search.length}]},[n("label",{staticClass:"search-bar__label",attrs:{for:e.uuid}},[n("Icon",{attrs:{icon:"magnifier"}})],1),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"},{name:"focus",rawName:"v-focus",value:e.focus,expression:"focus"}],staticClass:"search-bar__input",attrs:{id:e.uuid,type:"text",placeholder:"Nom du projet, référent, demandeur, etc..."},domProps:{value:e.search},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},input:function(t){t.target.composing||(e.search=t.target.value)}}}),n("a",{staticClass:"search-bar__reset",on:{click:e.reset}},[n("Icon",{attrs:{icon:"times",color:"#888888"}})],1)])},f=[],h=(n("841c"),n("430a")),p={name:"SearchBar",data:function(){var e=!1;return{focus:e}},computed:{search:{get:function(){return this.$store.state.projects.search},set:function(e){this.$store.commit(h["p"].MUTATIONS.PROJECTS_SET_SEARCH,{search:e}),this.$store.dispatch(h["p"].ACTIONS.PROJECTS_SEARCH)}},uuid:function(){return"search-bar__input__".concat(this._uid)}},methods:{reset:function(){this.search="",this.focus=!0}}},v=p,b=(n("8d67"),n("2877")),m=Object(b["a"])(v,d,f,!1,null,"4fda1a65",null),_=m.exports,g={name:"Header",components:{SearchBar:_},props:{scroll:{type:Boolean,default:function(){return!1}},view:{type:String,default:function(){return"MOBILE"}},show_btns:{type:Boolean,default:function(){return!0}},show_search_bar:{type:Boolean,default:function(){return!0}},show_all_btns:{type:Boolean,default:function(){return!0}},side_view:{type:String,default:function(){return""}}},data:function(){var e=window.outerWidth,t=!1;return{windowWidth:e,showMenu:t}},computed:Object(a["a"])(Object(a["a"])({},Object(l["e"])({admin:function(e){var t=e.admin;return t},date:function(e){var t=e.projects;return t.date},token:function(e){var t=e.token;return t},user:function(e){var t=e.user;return t},isMobile:function(e){var t=e.isMobile;return t},isScroll:function(e){var t=e.isScroll;return t},projects:function(e){var t=e.projects;return t.list},sorted:function(e){var t=e.projects;return t.sorted}})),{},{projectsIds:function(){return this.sorted.map((function(e){return e.id}))},USERS:function(){return h["q"]},styleSideView:function(){switch(this.side_view){case"left":return{right:"2em"};case"right":return{left:"2em"};case"":case"both":default:return{left:"0",right:"0"}}}}),methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["c"])({showProjectForm:h["p"].ACTIONS.OVERLAY_SHOW_PROJECT_FORM,showSortingForm:h["p"].ACTIONS.OVERLAY_SHOW_SORTING_FORM,showFilterForm:h["p"].ACTIONS.OVERLAY_SHOW_FILTERS_FORM})),Object(l["d"])({pop:h["p"].MUTATIONS.POPUPS_ADD})),{},{excel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,o,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.documentElement.style.cursor="progress",t.prev=1,t.next=4,fetch("/api/projects/excel",{method:"POST",headers:{Authorization:"Bearer ".concat(e.token)},body:JSON.stringify(e.projectsIds)});case 4:if(n=t.sent,n.ok){t.next=7;break}throw new Error("Un problème est survenu");case 7:return r=Object.fromEntries(n.headers.get("Content-Disposition").split(";").map((function(e){var t=Object(u["a"])(e.replace(/"([^"]+)"/g,"$1").trim().split("="));return t.length<2&&t.push(null),t}))),t.next=10,n.blob();case 10:o=t.sent,i=URL.createObjectURL(o),a=document.createElement("a"),a.href=i,a.download=r.filename,document.body.append(a),a.click(),a.remove(),URL.revokeObjectURL(i),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](1),e.pop({message:t.t0.message,variant:h["n"].WARNING});case 24:document.documentElement.style.cursor="";case 25:case"end":return t.stop()}}),t,null,[[1,21]])})))()},setWindowWidth:function(){this.windowWidth=window.outerWidth},filterProjects:function(){this.showMenu=!1,this.showFilterForm()},sortProjects:function(){this.showMenu=!1,this.showSortingForm()},newProject:function(){this.showMenu=!1,this.showProjectForm()}}),mouted:function(){}},w=g,O=(n("245d"),Object(b["a"])(w,s,c,!1,null,"ca04a87e",null)),S=O.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{style:[e.btnStyle],attrs:{id:"button-to-top"},on:{click:e.toTop}},[n("Icon",{attrs:{icon:"arrow-up"}})],1)},E=[],I={name:"ButtonToTop",props:{scroll:{type:Boolean,default:function(){return!1}}},computed:{btnStyle:function(){return this.scroll?{opacity:"0.6"}:{"pointer-events":"none",opacity:"0"}}},methods:{toTop:function(){window.scroll({top:0,behavior:"smooth"})}}},x=I,T=(n("3fef"),Object(b["a"])(x,j,E,!1,null,"2dc5f053",null)),M=T.exports,C=function(){return n.e("overlay").then(n.bind(null,"8bac"))},R=function(){return n.e("projects").then(n.bind(null,"380a"))},y=function(){return n.e("popups").then(n.bind(null,"ff5d"))},k={name:"App",components:{Header:S,Overlay:C,Projects:R,Popups:y,ButtonToTop:M},data:function(){return{update:this.$moment("2021-08-20","YYYY-MM-DD")}},computed:Object(a["a"])(Object(a["a"])({},Object(l["e"])({projects:function(e){var t=e.projects;return t.list},sorted:function(e){var t=e.projects;return t.sorted},overlayIsVisible:function(e){var t=e.overlay;return t.visible},isScroll:function(e){var t=e.isScroll;return t},isMobile:function(e){var t=e.isMobile;return t},user:function(e){var t=e.user;return t},token:function(e){var t=e.token;return t},sender:function(e){var t=e.sender;return t}})),{},{scroll:function(){return this.isScroll||this.isMobile},sortedProjectsIds:function(){return this.sorted.map((function(e){return e.id}))}}),methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["c"])({load:h["p"].ACTIONS.OVERLAY_LOAD,unload:h["p"].ACTIONS.OVERLAY_UNLOAD,filter:h["p"].ACTIONS.PROJECTS_FILTER})),Object(l["d"])({closeEventSource:h["p"].MUTATIONS.CLOSE_EVENT_SOURCE})),{},{excel:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}),beforeMount:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.load(),t.next=3,e.$store.dispatch(h["p"].ACTIONS.INIT);case 3:e.unload();case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this,t=window.matchMedia("(max-width: 800px)");t.addEventListener("change",(function(t){var n=t.matches;e.$store.commit(h["p"].MUTATIONS.SET_IS_MOBILE,{isMobile:n})})),window.addEventListener("scroll",(function(){var t=window.pageYOffset>=100;t!==e.isScroll&&e.$store.commit(h["p"].MUTATIONS.SET_IS_SCROLL,{isScroll:t})}))},beforeDestroy:function(){this.closeEventSource()}},A=k,N=(n("043c"),n("b0a0"),Object(b["a"])(A,r,o,!1,null,null,null));t["default"]=N.exports},"3fef":function(e,t,n){"use strict";n("9fa8")},4158:function(e,t,n){e.exports=n.p+"img/p.5894bd42.png"},"452c":function(e,t,n){},"498a":function(e,t,n){"use strict";var r=n("23e7"),o=n("58a8").trim,i=n("c8d2");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return o(this)}})},"4ed9":function(e,t,n){},5319:function(e,t,n){"use strict";var r=n("2ba4"),o=n("c65b"),i=n("e330"),a=n("d784"),s=n("d039"),c=n("825a"),u=n("1626"),l=n("5926"),d=n("50c4"),f=n("577e"),h=n("1d80"),p=n("8aa5"),v=n("dc4a"),b=n("0cb2"),m=n("14c3"),_=n("b622"),g=_("replace"),w=Math.max,O=Math.min,S=i([].concat),j=i([].push),E=i("".indexOf),I=i("".slice),x=function(e){return void 0===e?e:String(e)},T=function(){return"$0"==="a".replace(/./,"$0")}(),M=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),C=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var i=M?"$":"$0";return[function(e,n){var r=h(this),i=void 0==e?void 0:v(e,g);return i?o(i,e,r,n):o(t,f(r),e,n)},function(e,o){var a=c(this),s=f(e);if("string"==typeof o&&-1===E(o,i)&&-1===E(o,"$<")){var h=n(t,a,s,o);if(h.done)return h.value}var v=u(o);v||(o=f(o));var _=a.global;if(_){var g=a.unicode;a.lastIndex=0}var T=[];while(1){var M=m(a,s);if(null===M)break;if(j(T,M),!_)break;var C=f(M[0]);""===C&&(a.lastIndex=p(s,d(a.lastIndex),g))}for(var R="",y=0,k=0;k<T.length;k++){M=T[k];for(var A=f(M[0]),N=w(O(l(M.index),s.length),0),$=[],P=1;P<M.length;P++)j($,x(M[P]));var L=M.groups;if(v){var U=S([A],$,N,s);void 0!==L&&j(U,L);var B=f(r(o,void 0,U))}else B=b(A,s,N,$,L,o);N>=y&&(R+=I(s,y,N)+B,y=N+A.length)}return R+I(s,y)}]}),!C||!T||M)},"58aa":function(e,t,n){},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8d67":function(e,t,n){"use strict";n("58aa")},"9fa8":function(e,t,n){},b0a0:function(e,t,n){"use strict";n("452c")},c1f9:function(e,t,n){var r=n("23e7"),o=n("2266"),i=n("8418");r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},c8d2:function(e,t,n){var r=n("5e77").PROPER,o=n("d039"),i=n("5899"),a="​᠎";e.exports=function(e){return o((function(){return!!i[e]()||a[e]()!==a||r&&i[e].name!==e}))}},f1ad:function(e,t,n){}}]);
//# sourceMappingURL=chunk-42d50dcc.chunk-42d50dcc.05c9cac6.js.map