{"version":3,"sources":["webpack:///./src/components/Projects/Project/Reports.vue?7b65","webpack:///./src/components/Projects/Project/Reports.vue?8d3b","webpack:///src/components/Projects/Project/Reports.vue","webpack:///./src/components/Projects/Project/Reports.vue?b7d5","webpack:///./src/components/Projects/Project/Reports.vue?c55c"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","on","showFileForm","id","projectId","attrs","_e","_m","_reports","length","_l","report","key","_s","filename","staticClass","domProps","description","replace","date","format","style","downloadBtnStyle","downloadHandler","deleteBtnStyle","removeHandler","staticRenderFns","component"],"mappings":"kHAAA,W,oECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,SAAS,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,eAAgBN,EAAS,MAAEI,EAAG,SAAS,CAACG,GAAG,CAAC,MAAQ,WAAc,OAAOP,EAAIQ,aAAa,CAAEC,GAAIT,EAAIU,eAAkB,CAACV,EAAIM,GAAG,aAAaF,EAAG,OAAO,CAACO,MAAM,CAAC,KAAO,WAAW,GAAGX,EAAIY,OAAOR,EAAG,QAAQ,CAACJ,EAAIa,GAAG,GAAIb,EAAIc,SAASC,OAAS,EAAGX,EAAG,QAAQJ,EAAIgB,GAAIhB,EAAY,UAAE,SAASiB,GAAQ,OAAOb,EAAG,KAAK,CAACc,IAAID,EAAOR,IAAI,CAACL,EAAG,KAAK,CAACJ,EAAIM,GAAGN,EAAImB,GAAGF,EAAOG,aAAahB,EAAG,KAAK,CAACiB,YAAY,eAAe,CAACjB,EAAG,IAAI,CAACkB,SAAS,CAAC,UAAYtB,EAAImB,GAAGF,EAAOM,YAAYC,QAAQ,KAAM,cAAcpB,EAAG,KAAK,CAACiB,YAAY,QAAQ,CAACrB,EAAIM,GAAGN,EAAImB,GAAGF,EAAOQ,KAAKC,OAAO,eAAetB,EAAG,KAAK,CAACA,EAAG,MAAM,CAACiB,YAAY,aAAa,CAACjB,EAAG,SAAS,CAACuB,MAAM,CAAE3B,EAAI4B,kBAAmBjB,MAAM,CAAC,MAAQ,2BAA2BJ,GAAG,CAAC,MAAQ,WAAc,OAAOP,EAAI6B,gBAAgBZ,MAAa,CAACb,EAAG,OAAO,CAACO,MAAM,CAAC,KAAO,eAAe,GAAIX,EAAS,MAAEI,EAAG,SAAS,CAACuB,MAAM,CAAE3B,EAAI8B,gBAAiBnB,MAAM,CAAC,MAAQ,yBAAyBJ,GAAG,CAAC,MAAQ,WAAc,OAAOP,EAAI+B,cAAcd,EAAOR,OAAS,CAACL,EAAG,OAAO,CAACO,MAAM,CAAC,KAAO,aAAa,GAAGX,EAAIY,cAAa,GAAGR,EAAG,QAAQ,CAACJ,EAAIa,GAAG,UAC3pCmB,EAAkB,CAAC,WAAa,IAAIhC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,SAASF,EAAG,KAAK,CAACJ,EAAIM,GAAG,iBAAiBF,EAAG,KAAK,CAACJ,EAAIM,GAAG,kBAAkBF,EAAG,WAAW,WAAa,IAAIJ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACA,EAAG,MAAMA,EAAG,MAAMA,EAAG,MAAMA,EAAG,U,8IC+DnW,GACA,eACA,OACA,WACA,YACA,aAEA,SACA,WACA,+BAGA,KAZA,WAaA,OACA,uCACA,cACA,mBAEA,GACA,wBACA,eAEA,6CAEA,0CACA,gBACA,6CAFA,IAIA,SAJA,WAKA,mCAKA,OAJA,mDACA,oCAGA,KAGA,yCACA,gBACA,mDACA,iCACA,qCACA,uCACA,uCANA,IAQA,gBARA,YAQA,iMACA,SADA,SAEA,mBAFA,OAEA,EAFA,OAGA,yBACA,8BACA,SACA,aACA,wBACA,gBACA,wBACA,WACA,cACA,eAGA,6BACA,WAhBA,+CAkBA,cA1BA,SA0BA,2JACA,WACA,kCACA,uDACA,kCACA,sBALA,iDC/H+W,I,wBCQ3W6B,EAAY,eACd,EACAlC,EACAiC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-609fcb4c.chunk-609fcb4c.3f121c3d.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reports.vue?vue&type=style&index=0&id=ce58da0e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('header',[_c('h3',[_vm._v(\"Documents\")]),(_vm.admin)?_c('button',{on:{\"click\":function () { return _vm.showFileForm({ id: _vm.projectId }); }}},[_vm._v(\" Ajouter \"),_c('Icon',{attrs:{\"icon\":\"more\"}})],1):_vm._e()]),_c('table',[_vm._m(0),(_vm._reports.length > 0)?_c('tbody',_vm._l((_vm._reports),function(report){return _c('tr',{key:report.id},[_c('td',[_vm._v(_vm._s(report.filename))]),_c('td',{staticClass:\"description\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(report.description.replace(/\\n/, '<br>'))}})]),_c('td',{staticClass:\"date\"},[_vm._v(_vm._s(report.date.format(\"L HH:mm\")))]),_c('td',[_c('div',{staticClass:\"btn-group\"},[_c('button',{style:([_vm.downloadBtnStyle]),attrs:{\"title\":\"Télécharger le document\"},on:{\"click\":function () { return _vm.downloadHandler(report); }}},[_c('Icon',{attrs:{\"icon\":\"download\"}})],1),(_vm.admin)?_c('button',{style:([_vm.deleteBtnStyle]),attrs:{\"title\":\"Supprimer le document\"},on:{\"click\":function () { return _vm.removeHandler(report.id); }}},[_c('Icon',{attrs:{\"icon\":\"delete\"}})],1):_vm._e()])])])}),0):_c('tbody',[_vm._m(1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Nom\")]),_c('th',[_vm._v(\"Description\")]),_c('th',[_vm._v(\"Date d'ajout\")]),_c('th')])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td'),_c('td'),_c('td'),_c('td')])}]\n\nexport { render, staticRenderFns }","<template>\r\n\t<section>\r\n\t\t<header>\r\n\t\t\t<h3>Documents</h3>\r\n\t\t\t<button @click=\"() => showFileForm({ id: projectId })\" v-if=\"admin\">\r\n\t\t\t\tAjouter <Icon icon=\"more\" />\r\n\t\t\t</button>\r\n\t\t</header>\r\n\r\n\t\t<table>\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Nom</th>\r\n\t\t\t\t\t<th>Description</th>\r\n\t\t\t\t\t<th>Date d'ajout</th>\r\n\t\t\t\t\t<th></th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\r\n\t\t\t<tbody v-if=\"_reports.length > 0\">\r\n\t\t\t\t<tr v-for=\"report in _reports\" :key=\"report.id\">\r\n\t\t\t\t\t<td>{{ report.filename }}</td>\r\n\t\t\t\t\t<td class=\"description\">\r\n\t\t\t\t\t\t<p v-html=\"report.description.replace(/\\n/, '<br>')\" />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td class=\"date\">{{ report.date.format(\"L HH:mm\") }}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div class=\"btn-group\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t:style=\"[downloadBtnStyle]\"\r\n\t\t\t\t\t\t\t\ttitle=\"Télécharger le document\"\r\n\t\t\t\t\t\t\t\t@click=\"() => downloadHandler(report)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon icon=\"download\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t:style=\"[deleteBtnStyle]\"\r\n\t\t\t\t\t\t\t\ttitle=\"Supprimer le document\"\r\n\t\t\t\t\t\t\t\t@click=\"() => removeHandler(report.id)\"\r\n\t\t\t\t\t\t\t\tv-if=\"admin\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Icon icon=\"delete\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\r\n\t\t\t<tbody v-else>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t</section>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"@Modules/vuex\"\r\nimport { STORE, OVERLAY } from \"@Constants\"\r\n\r\nexport default {\r\n\tname: \"Reports\",\r\n\tprops: {\r\n\t\tprojectId: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\treports: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst downloadBtnStyle = {\r\n\t\t\t\"--btn-color\": \"var(--color-secondary)\",\r\n\t\t\tborder: \"none\",\r\n\t\t\tfontSize: \"1.25em\"\r\n\t\t}\r\n\t\tconst deleteBtnStyle = {\r\n\t\t\t\"--btn-color\": \"crimson\",\r\n\t\t\tborder: \"none\"\r\n\t\t}\r\n\t\treturn { downloadBtnStyle, deleteBtnStyle }\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tadmin: ({ admin }) => admin\r\n\t\t}),\r\n\t\t_reports() {\r\n\t\t\tconst reports = [...this.reports]\r\n\t\t\treports.sort(({ date: a }, { date: b }) =>\r\n\t\t\t\ta.isBefore(b) ? 1 : a.isSame(b) ? 0 : -1\r\n\t\t\t)\r\n\r\n\t\t\treturn reports\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions({\r\n\t\t\tshowFileForm: STORE.ACTIONS.OVERLAY_SHOW_FILE_FORM,\r\n\t\t\tload: STORE.ACTIONS.OVERLAY_LOAD,\r\n\t\t\tunload: STORE.ACTIONS.OVERLAY_UNLOAD,\r\n\t\t\tdownload: STORE.ACTIONS.FILES_DOWNLOAD,\r\n\t\t\tconfirm: STORE.ACTIONS.CONFIRM_SHOW\r\n\t\t}),\r\n\t\tasync downloadHandler({ id, filename }) {\r\n\t\t\tthis.load()\r\n\t\t\tconst FILE = await this.download({ id })\r\n\t\t\tconst BLOB_URL = URL.createObjectURL(FILE)\r\n\t\t\tconst LINK = document.createElement(\"a\")\r\n\t\t\tLINK.href = BLOB_URL\r\n\t\t\tLINK.download = filename\r\n\t\t\tdocument.body.append(LINK)\r\n\t\t\tLINK.dispatchEvent(\r\n\t\t\t\tnew MouseEvent(\"click\", {\r\n\t\t\t\t\tbubbles: true,\r\n\t\t\t\t\tcancelable: true,\r\n\t\t\t\t\tview: window\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\tdocument.body.removeChild(LINK)\r\n\t\t\tthis.unload()\r\n\t\t},\r\n\t\tasync removeHandler(file_id) {\r\n\t\t\tthis.confirm({\r\n\t\t\t\theader: \"Suppression d'un fichier\",\r\n\t\t\t\ttext: \"Êtes-vous sûr de vouloir supprimer ce fichier ?\",\r\n\t\t\t\taction: OVERLAY.ACTIONS.REMOVE_FILE,\r\n\t\t\t\tdetails: { file_id }\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nheader {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n}\r\ntable {\r\n\tmargin-top: 1em;\r\n\twidth: 100%;\r\n\tborder-collapse: collapse;\r\n}\r\n\r\nth {\r\n\ttext-transform: uppercase;\r\n}\r\n\r\nth,\r\ntd {\r\n\tpadding: 0.5em 1em;\r\n}\r\n\r\ntd:empty {\r\n\ttext-align: center;\r\n}\r\ntd:empty::before {\r\n\tcontent: \"-\";\r\n}\r\n\r\ntbody tr:nth-of-type(2n + 1) {\r\n\tbackground-color: hsla(0, 0%, 0%, 0.025);\r\n}\r\n\r\n.btn-group {\r\n\tdisplay: flex;\r\n\talign-items: stretch;\r\n\tjustify-content: center;\r\n}\r\n\r\n.date {\r\n\ttext-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reports.vue?vue&type=template&id=ce58da0e&scoped=true&\"\nimport script from \"./Reports.vue?vue&type=script&lang=js&\"\nexport * from \"./Reports.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Reports.vue?vue&type=style&index=0&id=ce58da0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce58da0e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}